!function(){var e,t,n,i=(e=function(e,t){"use strict";var n=/\n[\s]+$/,i=/^\n[\s]+/,o=/[\s]+$/,r=/^[\s]+/,a=/[\n\s]+/g,s=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],h=["code","pre","textarea"];e.exports=function e(t,u){if(Array.isArray(u))for(var c,l,d=t.nodeName.toLowerCase(),f=!1,p=0,m=u.length;p<m;p++){var y=u[p];if(Array.isArray(y))e(t,y);else{("number"==typeof y||"boolean"==typeof y||"function"==typeof y||y instanceof Date||y instanceof RegExp)&&(y=y.toString());var v=t.childNodes[t.childNodes.length-1];if("string"==typeof y)f=!0,v&&"#text"===v.nodeName?v.nodeValue+=y:(y=t.ownerDocument.createTextNode(y),t.appendChild(y),v=y),p===m-1&&(f=!1,-1===s.indexOf(d)&&-1===h.indexOf(d)?""===(c=v.nodeValue.replace(i,"").replace(o,"").replace(n,"").replace(a," "))?t.removeChild(v):v.nodeValue=c:-1===h.indexOf(d)&&(l=0===p?"":" ",c=v.nodeValue.replace(i,l).replace(r," ").replace(o,"").replace(n,"").replace(a," "),v.nodeValue=c));else if(y&&y.nodeType){f&&(f=!1,-1===s.indexOf(d)&&-1===h.indexOf(d)?""===(c=v.nodeValue.replace(i,"").replace(n," ").replace(a," "))?t.removeChild(v):v.nodeValue=c:-1===h.indexOf(d)&&(c=v.nodeValue.replace(r," ").replace(i,"").replace(n," ").replace(a," "),v.nodeValue=c));var _=y.nodeName;_&&(d=_.toLowerCase()),t.appendChild(y)}}}}},function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}),o=function(e,n){if(e)try{var i=document.querySelector(e);i&&i.scrollIntoView(n)}catch(t){}},r=function(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})};"function"==typeof Symbol&&Symbol.iterator;var a="undefined"!=typeof window;function s(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}s.prototype.push=function(e){this.queue.push(e),this.schedule()},s.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},s.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},n=function(){var e;return a?(window._nanoScheduler||(window._nanoScheduler=new s(!0)),e=window._nanoScheduler):e=new s,e},"function"==typeof Symbol&&Symbol.iterator;var h,u=n();c.disabled=!0;try{h=window.performance,c.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!h.mark}catch(t){}function c(e){if(c.disabled)return l;var n=(1e4*h.now()).toFixed()%Number.MAX_SAFE_INTEGER,i="start-"+n+"-"+e;function o(o){var r="end-"+n+"-"+e;h.mark(r),u.push(function(){var a=null;try{var s=e+" ["+n+"]";h.measure(s,i,r),h.clearMarks(i),h.clearMarks(r)}catch(t){a=t}o&&o(a,e)})}return h.mark(i),o.uuid=n,o}function l(e){e&&u.push(function(){e(new Error("nanotiming: performance API unavailable"))})}var d=c,f={};function p(){if(!(this instanceof p))return new p;this.trie={nodes:{}}}"function"==typeof Symbol&&Symbol.iterator,f=p,p.prototype.create=function(e){var t=e.replace(/^\//,"").split("/");return function e(n,i){var o=t.hasOwnProperty(n)&&t[n];if(!1===o)return i;var r=null;return/^:|^\*/.test(o)?(i.nodes.hasOwnProperty("$$")?r=i.nodes.$$:(r={nodes:{}},i.nodes.$$=r),"*"===o[0]&&(i.wildcard=!0),i.name=o.replace(/^:|^\*/,"")):i.nodes.hasOwnProperty(o)?r=i.nodes[o]:(r={nodes:{}},i.nodes[o]=r),e(n+1,r)}(0,this.trie)},p.prototype.match=function(e){var n=e.replace(/^\//,"").split("/"),i={},o=function e(o,r){if(void 0!==r){var a=n[o];if(void 0===a)return r;if(r.nodes.hasOwnProperty(a))return e(o+1,r.nodes[a]);if(r.name){try{i[r.name]=decodeURIComponent(a)}catch(t){return e(o,void 0)}return e(o+1,r.nodes.$$)}if(r.wildcard){try{i.wildcard=decodeURIComponent(n.slice(o).join("/"))}catch(t){return e(o,void 0)}return r.nodes.$$}return e(o+1)}}(0,this.trie);if(o)return(o=Object.assign({},o)).params=i,o},p.prototype.mount=function(e,t){var n=e.replace(/^\//,"").split("/"),i=null,o=null;if(1===n.length)o=n[0],i=this.create(o);else{var r=n.join("/");o=n[0],i=this.create(r)}Object.assign(i.nodes,t.nodes),t.name&&(i.name=t.name),i.nodes[""]&&(Object.keys(i.nodes[""]).forEach(function(e){"nodes"!==e&&(i[e]=i.nodes[""][e])}),Object.assign(i.nodes,i.nodes[""].nodes),delete i.nodes[""].nodes)},"function"==typeof Symbol&&Symbol.iterator;var m=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),i=f();return o._trie=i,o.on=function(e,t){if(e=e||"/",t._wayfarer&&t._trie)i.mount(e,t._trie.trie);else{var n=i.create(e);n.cb=t,n.route=e}return o},o.emit=o,o.match=r,o._wayfarer=!0,o;function o(e){var t=r(e),n=new Array(arguments.length);n[0]=t.params;for(var i=1;i<n.length;i++)n[i]=arguments[i];return t.cb.apply(t.cb,n)}function r(e){var t=i.match(e);if(t&&t.cb)return new a(t);var o=i.match(n);if(o&&o.cb)return new a(o);throw new Error("route '"+e+"' did not match")}function a(e){this.cb=e.cb,this.route=e.route,this.params=e.params}},y={},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=/file:\/\//.test("object"===("undefined"==typeof window?"undefined":v(window))&&window.location&&window.location.origin),b=new RegExp("^(file://|/)(.*.html?/?)?"),w=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),g=new RegExp("#"),A=new RegExp("[?].*$");function E(e){if(!(this instanceof E))return new E(e);e=e||{},this.router=m(e.default||"/404")}function S(e,t){return e=t?e.replace(b,""):e.replace(w,""),decodeURI(e.replace(A,"").replace(g,"/"))}y=E,E.prototype.on=function(e,t){e=e.replace(/^[#/]/,""),this.router.on(e,t)},E.prototype.emit=function(e){return e=S(e,_),this.router.emit(e)},E.prototype.match=function(e){return e=S(e,_),this.router.match(e)};function N(e,t){if(!e)throw new Error(t||"AssertionError")}N.notEqual=function(e,t,n){},N.notOk=function(e,t){},N.equal=function(e,t,n){},N.ok=N;var O=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],x=O.length;function L(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}var T=function(e,t){var n=e.nodeType,i=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,i=e.attributes,o=null,r=null,a=null,s=null,h=i.length-1;h>=0;--h)a=(s=i[h]).name,o=s.namespaceURI,r=s.value,o?(a=s.localName||a,t.getAttributeNS(o,a)!==r&&t.setAttributeNS(o,a,r)):t.hasAttribute(a)?t.getAttribute(a)!==r&&("null"===r||"undefined"===r?t.removeAttribute(a):t.setAttribute(a,r)):t.setAttribute(a,r);for(var u=n.length-1;u>=0;--u)!1!==(s=n[u]).specified&&(a=s.name,(o=s.namespaceURI)?(a=s.localName||a,e.hasAttributeNS(o,a)||t.removeAttributeNS(o,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===i?function(e,t){var n=e.value,i=t.value;L(e,t,"checked"),L(e,t,"disabled"),n!==i&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===i?function(e,t){L(e,t,"selected")}(e,t):"TEXTAREA"===i&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<x;n++){var i=O[n];e[i]?t[i]=e[i]:t[i]&&(t[i]=void 0)}}(e,t)};"function"==typeof Symbol&&Symbol.iterator;var k=3;function C(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||I(e)!==I(t)?e:(T(e,t),D(e,t),t):null:e}function I(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function D(e,t){for(var n,i,o,r,a=0,s=0;n=t.childNodes[s],i=e.childNodes[s-a],n||i;s++)if(i)if(n)if(R(i,n))(o=C(i,n))!==n&&(t.replaceChild(o,n),a++);else{r=null;for(var h=s;h<t.childNodes.length;h++)if(R(t.childNodes[h],i)){r=t.childNodes[h];break}r?((o=C(i,r))!==r&&a++,t.insertBefore(o,n)):i.id||n.id?(t.insertBefore(i,n),a++):(o=C(i,n))!==n&&(t.replaceChild(o,n),a++)}else t.appendChild(i),a++;else t.removeChild(n),s--}function R(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===k&&e.nodeValue===t.nodeValue}var P=function(e,t,n){return n&&n.childrenOnly?(D(t,e),e):C(t,e)};"function"==typeof Symbol&&Symbol.iterator;var V=/([^?=&]+)(=([^&]*))?/g;"function"==typeof Symbol&&Symbol.iterator;var j=/(noopener|noreferrer) (noopener|noreferrer)/,M=/^[\w-_]+:/;"function"==typeof Symbol&&Symbol.iterator;var U=function(e,t,n){var i,o=e.length;if(!(t>=o||0===n)){var r=o-(n=t+n>o?o-t:n);for(i=t;i<r;++i)e[i]=e[i+n];e.length=r}},q={};function $(e){if(!(this instanceof $))return new $(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}"function"==typeof Symbol&&Symbol.iterator,q=$,$.prototype.emit=function(e){for(var t=[],n=1,i=arguments.length;n<i;n++)t.push(arguments[n]);var o=d(this._name+"('"+e.toString()+"')"),r=this._listeners[e];return r&&r.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,o.uuid),o(),this},$.prototype.on=$.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},$.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},$.prototype.once=function(e,t){var n=this;return this.on(e,function i(){t.apply(n,arguments),n.removeListener(e,i)}),this},$.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,function i(){t.apply(n,arguments),n.removeListener(e,i)}),this},$.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(U(e,n,1),!0):void 0}}},$.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},$.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var i=t.length,o=0;o<i;o++)n.push(t[o]);return n},$.prototype._emit=function(e,t,n,i){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==i?[t].concat(n,i):[t].concat(n));for(var o=e.length,r=0;r<o;r++){var a=e[r];a.apply(a,n)}}};var G={};function B(e){if(!(this instanceof B))return new B(e);"number"==typeof e&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}G=B,Object.defineProperty(B.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),B.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},B.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},B.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},B.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},B.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},B.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge&&(this.remove(e),1))},B.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},B.prototype.evict=function(){this.tail&&this.remove(this.tail)};var H={};function W(e,t,n){this.cache="number"==typeof n?new G(n):n||new G(100),this.state=e,this.emit=t}function F(e){return new(e.bind.apply(e,arguments))}"function"==typeof Symbol&&Symbol.iterator,H=W,W.prototype.render=function(e,t){var n=this.cache.get(t);if(!n){for(var i=[],o=2,r=arguments.length;o<r;o++)i.push(arguments[o]);i.unshift(e,t,this.state,this.emit),n=F.apply(F,i),this.cache.set(t,n)}return n};var K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y=J,z={};function J(e){var t=d("choo.constructor");if(!(this instanceof J))return new J(e);e=e||{};var n=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hashEnabled=void 0!==e.hash&&e.hash,this._hasWindow="undefined"!=typeof window,this._cache=e.cache,this._loaded=!1,this._stores=[function(e){n.emitter.prependListener(n._events.DOMTITLECHANGE,function(t){e.title=t,n._hasWindow&&(document.title=t)})}],this._tree=null;var i={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,i):i,delete window.initialState):this.state=i,this.router=y({curry:!0}),this.emitter=q("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title),t()}J.prototype.route=function(e,t){var n=d("choo.route('"+e+"')");this.router.on(e,t),n()},J.prototype.use=function(e){var t=this;this._stores.push(function(n){var i="choo.use";i=e.storeName?i+"("+e.storeName+")":i;var o=d(i);e(n,t.emitter,t),o()})},J.prototype.start=function(){var e,t,n=d("choo.start"),i=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){i._matchRoute(i.state),i._loaded&&(i.emitter.emit(i._events.RENDER),setTimeout(o.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){i.emitter.emit(i._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){window.history.pushState(z,null,e),i.emitter.emit(i._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){window.history.replaceState(z,null,e),i.emitter.emit(i._events.NAVIGATE)}),window.onpopstate=function(){i.emitter.emit(i._events.POPSTATE)},i._hrefEnabled&&(e=function(e){var t=e.href,n=e.hash;t!==window.location.href?i.emitter.emit(i._events.PUSHSTATE,t):!i._hashEnabled&&n&&o(n)},t=t||window.document,window.addEventListener("click",function(n){if(!(n.button&&0!==n.button||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.defaultPrevented)){var i=function e(n){if(n&&n!==t)return"a"!==n.localName||void 0===n.href?e(n.parentNode):n}(n.target);i&&(window.location.protocol!==i.protocol||window.location.hostname!==i.hostname||window.location.port!==i.port||i.hasAttribute("data-nanohref-ignore")||i.hasAttribute("download")||"_blank"===i.getAttribute("target")&&j.test(i.getAttribute("rel"))||M.test(i.getAttribute("href"))||(n.preventDefault(),e(i)))}}))),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(e){e(i.state)}),this._tree=this._prerender(this.state),this.emitter.prependListener(i._events.RENDER,function(e,t){t||(t=window.requestAnimationFrame);var n=!1,i=null;return function(){null!==i||n||(n=!0,t(function(){n=!1;for(var t=i.length,o=new Array(t),r=0;r<t;r++)o[r]=i[r];e.apply(e,o),i=null})),i=arguments}}(function(){var e=d("choo.render"),t=i._prerender(i.state),n=d("choo.morph");P(i._tree,t),n(),e()})),r(function(){i.emitter.emit(i._events.DOMCONTENTLOADED),i._loaded=!0}),n(),this._tree},J.prototype.mount=function(e){var t=d("choo.mount('"+e+"')");if("object"!==("undefined"==typeof window?"undefined":K(window)))return this.selector=e,t(),this;var n=this;r(function(){var t=d("choo.render"),i=n.start();n._tree="string"==typeof e?document.querySelector(e):e;var o=d("choo.morph");P(n._tree,i),o(),t()}),t()},J.prototype.toString=function(e,t){(t=t||{}).components=t.components||{},t.events=Object.assign({},t.events,this._events),this._setCache(t),this._matchRoute(t,e),this.emitter.removeAllListeners(),this._stores.forEach(function(e){e(t)});var n=this._prerender(t);return"string"==typeof n.outerHTML?n.outerHTML:n.toString()},J.prototype._matchRoute=function(e,t){var n,i;t?(n=t.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(n=n.replace(/#.+$/,"")),i=t):(n=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(n+=window.location.hash.replace(/^#/,"/")),i=window.location.search);var o,r=this.router.match(n);this._handler=r.cb,e.href=n,e.query=(o={},i.replace(/^.*\?/,"").replace(V,function(e,t,n,i){var r=decodeURIComponent(i),a=decodeURIComponent(t);o.hasOwnProperty(a)?Array.isArray(o[a])?o[a].push(r):o[a]=[o[a],r]:o[a]=r}),o),e.route=r.route,e.params=r.params},J.prototype._prerender=function(e){var t=d("choo.prerender('"+e.route+"')"),n=this._handler(e,this.emit);return t(),n},J.prototype._setCache=function(e){var t=new H(e,this.emitter.emit.bind(this.emitter),this._cache);function n(e,n){for(var i=[],o=0,r=arguments.length;o<r;o++)i.push(arguments[o]);return t.render.apply(t,i)}e.cache=n,n.toJSON=function(){return null}};var X={},Z={};(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{};"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=X),Z=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Q={};(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},Q=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ee,te=Object.create(null),ne="onloadid"+(new Date%9e6).toString(36),ie="data-"+ne,oe=0;if(Q&&Q.MutationObserver){var re=new MutationObserver(function(e){if(!(Object.keys(te).length<1))for(var t=0;t<e.length;t++)e[t].attributeName!==ie?(ue(e[t].removedNodes,he),ue(e[t].addedNodes,se)):(n=e[t],i=se,o=he,r=void 0,r=n.target.getAttribute(ie),function(e,t){return!(!e||!t)&&te[e][3]===te[t][3]}(n.oldValue,r)?te[r]=te[n.oldValue]:(te[n.oldValue]&&o(n.oldValue,n.target),te[r]&&i(r,n.target)));var n,i,o,r});Z.body?ae(re):Z.addEventListener("DOMContentLoaded",function(e){ae(re)})}function ae(e){e.observe(Z.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[ie]})}function se(e,t){te[e][0]&&0===te[e][2]&&(te[e][0](t),te[e][2]=1)}function he(e,t){te[e][1]&&1===te[e][2]&&(te[e][1](t),te[e][2]=0)}function ue(e,t){for(var n=Object.keys(te),i=0;i<e.length;i++){if(e[i]&&e[i].getAttribute&&e[i].getAttribute(ie)){var o=e[i].getAttribute(ie);n.forEach(function(n){o===n&&t(n,e[i])})}e[i].childNodes.length>0&&ue(e[i].childNodes,t)}}(ee=function e(t,n,i,o){return n=n||function(){},i=i||function(){},t.setAttribute(ie,"o"+oe),te["o"+oe]=[n,i,0,o||e.caller],oe+=1,t}).KEY_ATTR=ie;var ce,le=ee.KEY_ID=ne,de=ee.KEY_ATTR;function fe(e){this._hasWindow="undefined"!=typeof window,this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=e||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];var t=this;Object.defineProperty(this,"element",{get:function(){var e=Z.getElementById(t._id);if(e)return e.dataset.nanocomponent===t._ncID?e:void 0}})}ce=fe,fe.prototype.render=function(){for(var e,t=d(this._name+".render"),n=new Array(arguments.length),i=0;i<arguments.length;i++)n[i]=arguments[i];if(this._hasWindow){if(this.element){e=this.element;var o=d(this._name+".update"),r=this._rerender||this.update.apply(this,n);if(o(),this._rerender&&(this._rerender=!1),r){var a=this._handleRender(n),s=d(this._name+".morph");P(e,a),s(),this.afterupdate&&this.afterupdate(e)}return this._proxy||(this._proxy=this._createProxy()),t(),this._proxy}return this._reset(),e=this._handleRender(n),this.beforerender&&this.beforerender(e),(this.load||this.unload||this.afterreorder)&&(ee(e,this._handleLoad,this._handleUnload,this._ncID),this._olID=e.dataset[le]),t(),e}var h=d(this._name+".create");return e=this.createElement.apply(this,n),h(),t(),e},fe.prototype.rerender=function(){this._rerender=!0,this.render.apply(this,this._arguments)},fe.prototype._handleRender=function(e){var t=d(this._name+".createElement"),n=this.createElement.apply(this,e);return t(),this._rootNodeName||(this._rootNodeName=n.nodeName),this._arguments=e,this._brandNode(this._ensureID(n))},fe.prototype._createProxy=function(){var e=Z.createElement(this._rootNodeName),t=this;return this._brandNode(e),e.id=this._id,e.setAttribute("data-proxy",""),e.isSameNode=function(e){return e&&e.dataset.nanocomponent===t._ncID},e},fe.prototype._reset=function(){this._ncID="ncid-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null},fe.prototype._brandNode=function(e){return e.setAttribute("data-nanocomponent",this._ncID),this._olID&&e.setAttribute(de,this._olID),e},fe.prototype._ensureID=function(e){return e.id?this._id=e.id:e.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),e},fe.prototype._handleLoad=function(e){this._loaded?this.afterreorder&&this.afterreorder(e):(this._loaded=!0,this.load&&this.load(e))},fe.prototype._handleUnload=function(e){this.element||(this._loaded=!1,this.unload&&this.unload(e))},fe.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")},fe.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};var pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),me=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),pe(t,[{key:"createElement",value:function(e){return this.audioContext=new AudioContext,this.canvas=document.createElement("canvas"),this.canvas.width=e.width||400,this.canvas.height=e.height||240,this.context=this.canvas.getContext("2d"),this.update(e),this.canvas}},{key:"update",value:function(e){var t=e.audio,n=e.color,i=e.background,o=e.width,r=e.height;return this.color=n||"hotpink",this.background=i||"#fff",null==o&&(o=400),null==r&&(r=240),o!==this.canvas.width&&(this.canvas.width=o),r!==this.canvas.height&&(this.canvas.height=r),t!==this.audio&&(this.audio&&this.stop(),this.audio=t,this.start()),!1}},{key:"start",value:function(){for(var e=this.audioContext,t=this.canvas.width,n=e.createAnalyser(),i=32;2*i<t;)i*=2;n.fftSize=i;var o=e.createMediaElementSource(this.audio);o.connect(n),o.connect(e.destination),this.source=o,this.analyser=n,this.buffer=new Uint8Array(n.frequencyBinCount),this.draw()}},{key:"draw",value:function(){var e=this,t=this.analyser,n=this.canvas,i=this.context,o=this.buffer;t.getByteFrequencyData(o),i.fillStyle=this.background,i.fillRect(0,0,n.width,n.height),i.fillStyle=this.color;for(var r=Math.floor(n.width/(o.length+1)),a=0;a<o.length;a++){var s=n.height/255*o[a];i.fillRect((r+1)*a,n.height-s-2,r,s+2)}this.loop=requestAnimationFrame(function(){return e.draw()})}},{key:"stop",value:function(){this.loop&&(cancelAnimationFrame(this.loop),this.loop=null),this.source.disconnect(this.analyser),this.source.disconnect(this.audioContext.destination),this.source=null,this.analyser=null,this.buffer=null}},{key:"unload",value:function(){this.stop()}}]),t}(),ye=Y();ye.use(function(e,t){e.playing=!1,e.audio=new Audio("https://api.soundcloud.com/tracks/495867858/stream?client_id=9d883cdd4c3c54c6dddda2a5b3a11200"),e.audio.crossOrigin="anonymous",t.on("play",function(){e.audio.play(),e.playing=!0,t.emit("render")}),t.on("file",function(n){e.audio&&/^blob:/.test(e.audio.src)&&URL.revokeObjectURL(e.audio.src),e.audio=new Audio(URL.createObjectURL(n)),e.audio.addEventListener("canplaythrough",function(){t.emit("render"),e.audio.play()})})}),ye.route("*",function(e,t){return function(){var e=i({}),t=document.createElement("body"),n=document.createElement("p"),o=document.createElement("input");o.setAttribute("type","file"),o.onchange=arguments[0],o.setAttribute("accept","audio/*"),e(n,["\n        ",o,"\n      "]);var r=document.createElement("p"),a=document.createElement("a");return a.setAttribute("href","https://soundcloud.com/98b/4-stop-talking-featjvcki-wai"),e(a,["BRYN \u2013 stop talking! (feat. Jvcki Wai)"]),e(r,["\n        (Example is ",a,")\n      "]),e(t,["\n      ",arguments[1],"\n      ",n,"\n      ",r,"\n      ",arguments[2],"\n    "]),t}(function(e){var n=e.target.files[0];t("file",n)},e.playing?null:function(){var e=i({}),t=document.createElement("p"),n=document.createElement("button");return n.onclick=arguments[0],e(n,["here"]),e(t,["\n          Browsers tend to block autoplay. Select a file below or click ",n," to start playing a demo track.\n        "]),t}(function(){t("play")}),e.cache(me,"bars").render({width:600,height:400,audio:e.audio}))}),ye.mount("body")}();
//# sourceMappingURL=bundle.js.map